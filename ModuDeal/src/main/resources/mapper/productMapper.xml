<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.application.moduDeal.product.dao.ProductDAO">

	<insert id="saveProduct" parameterType="int">
		<selectKey resultType="int" keyProperty="productId" order="BEFORE">
        SELECT PRODUCT_ID FROM PRODUCT     
       	WHERE PRODUCT_ID  = #{productId}   
    	</selectKey>  
		INSERT INTO PRODUCT (
		TITLE,
		DESCRIPTION,
		QTY,
		PRICE,
		PRODUCT_CATEGORY,
		USER_ID,
		PRODUCT_AT
		)
		VALUES (
		#{title},
		#{description},
		#{qty},
		#{price},
		#{productCategory},
		#{userId},
		#{productAt}
		)
	</insert>
		
	
	<insert id="saveProductImages" parameterType="list">
		INSERT INTO PRODUCT_IMG (
		IMG_UUID,
		PRODUCT_ID,
		IMG_ORIGINAL_NAME,
		IMG_AT
		)
		VALUES
		<foreach collection="list" item="item" separator=",">
			(
			#{item.imgUuid},
			#{item.productId},
			#{item.imgOriginalName},
			#{item.imgAt}
			)
		</foreach>
	</insert>

</mapper>